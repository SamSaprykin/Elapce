<head>
	<link rel='stylesheet' href='/stylesheets/search-filter.css' />
	<!-- UIkit CSS -->
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/uikit@3.3.0/dist/css/uikit.min.css" />

	<!-- UIkit JS -->
	<script src="https://cdn.jsdelivr.net/npm/uikit@3.3.0/dist/js/uikit.min.js"></script>
	<script src="https://cdn.jsdelivr.net/npm/uikit@3.3.0/dist/js/uikit-icons.min.js"></script>
</head>
<form action="/projects" method="GET">
	
	  
	<div>
		<input type="search" class="search-input" placeholder="Искать" name="search" id="seach" value="<%= query.search %>"> 
		<div class="input-group">
			
			<button class="input-text-head" id="input-position" type="button">
				<% if(query.type.length === 0){ %>
					Тип недвижимости
				  <% } else { %>  
					<%= query.type %> 
				 <% } %>
				
			</button>
			<div uk-dropdown="mode: click;animation: uk-animation-slide-top-small;pos: bottom-justify">
				<ul class="uk-nav uk-dropdown-nav">
					<li class="uk-active"><input type="radio" name="type" value="Апартаменты" id="radio1" class="radio-hidden uk-dropdown-close-checkbox"></input><label  for='radio1'>Апартаменты</label></li>
					<li class="uk-active"><input type="radio" name="type" value="Вилла" id="radio2" class="radio-hidden uk-dropdown-close-checkbox"></input><label  for='radio2'>Вилла</label></li>
					<li class="uk-active"><input type="radio" name="type" value="Участок земли" id="radio3" class="radio-hidden uk-dropdown-close-checkbox"></input><label  for='radio3'>Участок земли</label></li>
					<li class="uk-active"><input type="radio" name="type" value="Коммерческая" id="radio4" class="radio-hidden uk-dropdown-close-checkbox"></input><label  for='radio4'>Коммерческая</label></li>
					<li class="uk-active"><input type="radio" name="type" value="Под реконструкцию" id="radio5" class="radio-hidden uk-dropdown-close-checkbox"></input><label  for='radio5' class="label-last">Под реконструкцию</label></li>
				</ul>
			</div>
			
			
			<button class="input-text-head second" id="input-location" type="button">
				<% if(query.location.length === 0){ %>
					Местоположение
				  <% } else { %>  
					<%= query.location %> 
				 <% } %>
				
			</button>
			<div uk-dropdown="mode: click;animation: uk-animation-slide-top-small;pos: bottom-left" class="location-dropdown">
				<ul class="uk-nav uk-dropdown-nav">
					<div class="uk-margin">
							<input class="search-location"  type="search" placeholder="Искать..." id="location" name="location" value="<%= query.location %>" >
					</div>
					<ul class="list-variants"><li>Испания</li><li>Польша</li><li>Таиланд</li><li>Турция</li><li>Эстония</li><li>Венгрия</li></ul>
				</ul>
				
			</div>
			<button class="input-text-head second" id="input-price" type="button">
				<% if(query.price.min.length === 0){ %>
					Цена
				  <% } else { %>  
					<%= query.price.min %> - <%= query.price.max %>
				 <% } %>
				
			</button>
			<div uk-dropdown="mode: click;animation: uk-animation-slide-top-small;pos: bottom-left" class="price-dropdown">
				<ul class="uk-nav uk-dropdown-nav">
					<div class="uk-margin">
						<div class="wrapper-price-inputs">
							<input type="number" id="min" class="input-price" name="price[min]" min="0" max="1000000" step="1000" placeholder="от" value="<%= query.price.min %>">
							<input type="number" id="max" class="input-price" name="price[max]" min="0" max="10000000" step="1000" placeholder="до" value="<%= query.price.max %>">
							<button class="price-button"></button>
						</div>	
					</div>
					<ul class="list-variants"><li>до 50 000</li><li>50 000 - 100 000</li><li>100 000 - 150 000</li><li>150 000 - 250 000</li><li>от 250 000</li></ul>
				</ul>
				
			</div>
			
			
			<input type="text" class="input-text-head small-word" placeholder="Площадь" name="" id="">
			<input type="button" class="input-text-head second filter-additional" value="Расширенный фильтр" id="collapsible" >
			
			<input type="submit" value="искать" class="input-submit-head">
			<div id="content" style="max-height:0px;" >
				<div class="footer-search search-main">
					<div class="left-side-search">
						<fieldset>
							<label for="seaDistance">Расстояние до моря</label>
							<input type="number" step="10" class="form-control" placeholder="Расстояние до моря" id="seaDistance" name="seaDistance" value="<%= query.seaDistance %>">
						</fieldset>
						<fieldset>
							<label for="area">Площадь до(м2):</label>
							<input type="number" class="form-control" placeholder="Площадь" id="area" name="area" value="<%= query.area %>">
						</fieldset>
					</div>
					
				
					<fieldset>
					
					  <legend>Ширина поиска</legend>
					  <div>
						<input type="radio" name="distance" class="checbox" id="distance25" value="25" <%= query.distance === '25' ? 'checked' : '' %>>
						<label for="distance25">50 км</label>
					  </div>
					  <div>
						<input type="radio" name="distance" class="checbox" id="distance50" value="50" <%= query.distance === '50' ? 'checked' : '' %>>
						<label for="distance50">100 км</label>
					  </div>
					  <div>
						<input type="radio" name="distance" class="checbox" id="distance100" value="100" <%= query.distance === '100' ? 'checked' : '' %>>
						  <label for="distance100">200 км</label>
					  </div>
					  <div>
						  <a href="#" id="clear-distance" class="reset-form">Очистить</a>
					  </div>
					</fieldset>
				
					<fieldset>
						<legend>Количество спален</legend>
						<input type="checkbox" id="one-bedroom" name="bedrooms[]" value="1" <%= query.bedrooms.includes('1') ? 'checked' : '' %>>
						<label for="one-bedroom">1 спальня</label><br>
						<input type="checkbox" id="two-bedroom" name="bedrooms[]" value="2" <%= query.bedrooms.includes('2') ? 'checked' : '' %>>
						<label for="two-bedroom">2 спальни</label><br>
						<input type="checkbox" id="three-bedroom" name="bedrooms[]" value="3" <%= query.bedrooms.includes('3') ? 'checked' : '' %>>
						<label for="three-bedroom">3 спальни</label><br>
						<input type="checkbox" id="four-bedroom" name="bedrooms[]" value="4" <%= query.bedrooms.includes('4') ? 'checked' : '' %>>
						<label for="four-bedroom">4 спальни</label><br>
						<input type="checkbox" id="five-bedroom" name="bedrooms[]" value="5" <%= query.bedrooms.includes('5') ? 'checked' : '' %>>
						<label for="five-bedroom">5 спален</label><br>
						<input type="checkbox" id="more-bedroom" name="bedrooms[]" value="6" <%= query.bedrooms.includes('5+') ? 'checked' : '' %>>
						<label for="more-bedroom">6 и более</label>
					</fieldset>
				
					
				
					<fieldset>
						<legend>Цель покупки</legend>
						<div>
							<input type="radio" id="invest" class="checbox" name="appointment" value="Инвестиции" <%= query.appointment.includes('Инвестиции') ? 'checked' : '' %>>
							<label for="invest">Инвестиции</label>
						</div>
						<div>
							<input type="radio" id="rent" class="checbox" name="appointment" value="Аренда" <%= query.appointment.includes('Аренда') ? 'checked' : '' %>> 
							<label for="rent">Аренда</label>
						</div>
						<div>
							<input type="radio" id="personal" class="checbox" name="appointment" value="Личное использование" <%= query.appointment.includes('Личное использование') ? 'checked' : '' %>>
							<label for="personal">Личное использование</label>
						</div>
					</fieldset>
				</div>
				
				
				<div class="footer-search">
					<div>
						<a href="/projects" class="reset-form">Cбросить форму поиска</a>
					</div>
					
					<input type="submit" value="искать" class="input-submit-head">
				</div>
				
		  	</div>

			
		</div>
	</div>
	
</form>

<script src="/javascripts/use-my-location.js"></script>
<script>
	var coll = document.getElementById("collapsible");
	var content = document.getElementById("content")
	var hide = document.getElementById("hide")
	
	coll.addEventListener("click", function() {
		
		if(content.style.maxHeight == "0px") {
			content.style.maxHeight = "1000px"
			coll.value="Скрыть фильтр"
		}
		else {
			content.style.maxHeight = "0px"
			coll.value="Расширенный фильтр"
		}
		
	});
	
	
	$(document).ready(function() {
		var $dropdown = UIkit.dropdown('.uk-dropdown', {
    		delayHide: 1
		  });
		  
		
		
		var inputPosition = document.getElementById("input-position")
		
		$('.uk-dropdown-close-checkbox').on('click', function() {
			if( $(this).is(':checked') ) $dropdown.hide();
			var checkCheck = $('.uk-dropdown-close-checkbox:checked')[0].value
			inputPosition.textContent = checkCheck
				
		});

		$('.price-button').on('click', function(e){
			e.preventDefault();
			UIkit.dropdown($('.uk-dropdown')[2]).hide();
			var inputsPrice = $('.input-price')
			var priceButton = document.getElementById('input-price')
			
			var valueOne = inputsPrice[0].value.toString()
			var valueTwo = inputsPrice[1].value.toString()
			console.log(valueOne)
			console.log(valueTwo)
			priceButton.textContent = "".concat(valueOne, " - ").concat(valueTwo);
		})
	});


	
	
</script>

	  